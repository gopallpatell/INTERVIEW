Q What is System Monitoring 
CPU usage
Memory usage
Disk usage
Network traffic
Server uptime

Tools:
AWS CloudWatch
Node Exporter
Prometheus

Example:
CPU > 80% for 5 minutes â†’ alert sent

Q what is Application Monitoring?
Application monitoring is the process of tracking application performance, availability, and error metrics to ensure reliable 
and responsive user experience.

### metrics
System â†’ CPU, Memory, Disk, Network
App â†’ Requests, Latency, Errors, Throughput
K8s â†’ Node, Pod, Container health
DB â†’ Connections, Queries, Size
Cloud â†’ CPU, Network, Disk
Business â†’ Domain events

First: What Is ELK Stack?
it is a open source set of tools that allow as to do monitor, process, collect and visualize the logs from almost any source
Sources â†’ OS, Apps, Containers,pods, Cloud, Network Devices
In real-time ELK setup on Kubernetes, Fluentd runs as a DaemonSet to collect container logs and stream them to Elasticsearch,
while Kibana provides real-time log visualization and analysis for troubleshooting and monitoring.
types of logs
system logs, process logs, error logs, access logs, audit logs

featers of ELK 
we can also use it for system and application performance
logging
stack security & alerting 
scalibility
visualzation

Fluentd, Logstash â†’ collects logs (real time)
Elasticsearch â†’ stores logs
Kibana â†’ view & search logs

kubectl create namespace logging

kubectl apply -f elasticsearch.yml
kubectl apply -f elasticsearch-service.yml
kubectl apply -f kibana.yml
kubectl apply -f kibana-service.yml
kubectl apply -f fluentd-configmap.yml
kubectl apply -f fluentd-daemonset.yml

Architecture

Component	Purpose
Logstash          	collect & filter data(logs)
Elasticsearch	      Stores & indexes logs
Kibana	            Visualizes & searches logs

ğŸ“Œ Log flow:
App Logs â†’ Logstash â†’ Elasticsearch â†’ Kibana â†’ Alerting
As soon as an application writes a log, you can see it in Kibana within seconds.
kubectl run test-app --image=nginx
kubectl logs test-app
ğŸ‘‰ Logs appear in Kibana instantly ğŸ‰

STEP 1: Install Java
sudo apt update
sudo apt install openjdk-11-jdk -y
java -version
sudo apt-get -y nginx

STEP 2: Install Elasticsearch
Add Elastic repository

wget -qO - https://artifacts.elastic.co/GPG-KEY-elasticsearch | sudo apt-key add -
sudo apt install apt-transport-https -y
echo "deb https://artifacts.elastic.co/packages/8.x/apt stable main" | sudo tee /etc/apt/sources.list.d/elastic-8.x.list
sudo apt update

sudo apt install elasticsearch -y

STEP 3: Configure Elasticsearch
Edit config:
sudo nano /etc/elasticsearch/elasticsearch.yml
Add / ensure:
network.host: 0.0.0.0    # or localhost
discovery.type: single-node

Start service:
sudo systemctl start elasticsearch
sudo systemctl enable elasticsearch

Test:
curl http://localhost:9200   # If you see JSON â†’ Elasticsearch is running

 Install Kibana
sudo apt install kibana -y

Edit config:
sudo nano /etc/kibana/kibana.yml
Set:
server.host: "0.0.0.0"
elasticsearch.hosts: ["http://localhost:9200"]

Start Kibana:
sudo systemctl start kibana
sudo systemctl enable kibana

Access:
http://<VM-IP>:5601

STEP 5: Configure Logstash Pipeline
Create config file:
sudo nano /etc/logstash/conf.d/app.conf

Example:

input {
  file {
    path => "/var/log/app.log"
    start_position => "beginning"
  }
}

filter {
  grok {
    match => { "message" => "%{TIMESTAMP_ISO8601:timestamp} %{LOGLEVEL:level} %{GREEDYDATA:msg}" }
  }
}

output {
  elasticsearch {
    hosts => ["http://localhost:9200"]
    index => "app-logs"
  }
}

Start Logstash:
sudo systemctl start logstash
sudo systemctl enable logstash


Or Use FileBeat beacause it is lieghtweight instant of logstash
Lightweight â†’ consumes very few resources
Fast â†’ near real-time log forwarding
Simple setup â†’ just install on the host or pod
Ideal for production Kubernetes clusters

Download filebeat Ubuntu / Debian:
wget https://artifacts.elastic.co/downloads/beats/filebeat/filebeat-8.11.0-amd64.deb
sudo dpkg -i filebeat-8.11.0-amd64.deb

Step 2: Configure Filebeat
Edit the configuration file:
sudo nano /etc/filebeat/filebeat.yml
filebeat.inputs:
- type: log
  paths:
    - /var/log/*.log

output.elasticsearch:
  hosts: ["http://localhost:9200"]

Enable Kubernetes logs if needed:
filebeat.autodiscover:
  providers:
    - type: kubernetes
      hints.enabled: true

Step 3: Enable & Start Filebeat
sudo systemctl enable filebeat
sudo systemctl start filebeat
sudo systemctl status filebeat

For K8s
Create All this files

kubectl apply -f elasticsearch.yml
kubectl apply -f elasticsearch-service.yml
kubectl apply -f kibana.yml
kubectl apply -f kibana-service.yml
kubectl apply -f filebeat-configmap.yml
kubectl apply -f filebeat-daemonset.yml

ELK in Kubernetes uses Filebeat or Fluentd as a DaemonSet to collect pod logs in real-time, stores them in Elasticsearch, 
and visualizes them in Kibana.

Use Nginx as a reverse proxy with basic auth to secure Kibana on a server, forwarding traffic from port 80 to Kibana and 
requiring username/password.

ğŸ”¹ 1ï¸âƒ£ Install Nginx
sudo apt update
sudo apt install nginx -y

ğŸ”¹ 2ï¸âƒ£ Create Username & Password
Install htpasswd tool (if not already):
sudo apt install apache2-utils -y

Create a user:
sudo htpasswd -c /etc/nginx/htpasswd kibanaadmin
Enter password when prompted
Creates /etc/nginx/htpasswd with username & encrypted password

ğŸ”¹ 3ï¸âƒ£ Configure Nginx as Reverse Proxy for Kibana
Edit Nginx default config - /etc/nginx/sites-available/nginx.conf
or create a new one:
sudo nano /etc/nginx/sites-available/kibana.conf
Add:
server {
    listen 80;

    server_name your-server-ip-or-domain;

    auth_basic "Restricted Access";
    auth_basic_user_file /etc/nginx/htpasswd;

    location / {
        proxy_pass http://localhost:5601;  # Kibana default port
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}

ğŸ”¹ 4ï¸âƒ£ Restart Nginx
sudo systemctl restart nginx
sudo systemctl enable nginx

ğŸ”¹ 5ï¸âƒ£ Test Access
Open browser: http://<Server-IP>
You will see login prompt
Enter kibanaadmin and your password
After login â†’ Kibana dashboard opens

For K8s

STEP 1: Create htpasswd File (Username & Password)
Run this on your local machine or control node:
htpasswd -c htpasswd kibanaadmin
It will create a file called htpasswd.

ğŸ§© STEP 2: Create Kubernetes Secret (for password)
kubectl create secret generic kibana-basic-auth \
  --from-file=htpasswd \
  -n logging


âœ… This securely stores username & password.

ğŸ§© STEP 3: Nginx Configuration (ConfigMap)
ğŸ“„ nginx-config.yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: nginx-kibana-config
  namespace: logging
data:
  default.conf: |
    server {
      listen 80;

      auth_basic "Restricted Kibana";
      auth_basic_user_file /etc/nginx/htpasswd;

      location / {
        proxy_pass http://kibana.logging.svc.cluster.local:5601;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
      }
    }

ğŸ§© STEP 4: Deploy Nginx (Reverse Proxy)
ğŸ“„ nginx-deployment.yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-kibana
  namespace: logging
spec:
  replicas: 1
  selector:
    matchLabels:
      app: nginx-kibana
  template:
    metadata:
      labels:
        app: nginx-kibana
    spec:
      containers:
      - name: nginx
        image: nginx:latest
        ports:
        - containerPort: 80
        volumeMounts:
        - name: nginx-config
          mountPath: /etc/nginx/conf.d/default.conf
          subPath: default.conf
        - name: auth
          mountPath: /etc/nginx/htpasswd
          subPath: htpasswd
      volumes:
      - name: nginx-config
        configMap:
          name: nginx-kibana-config
      - name: auth
        secret:
          secretName: kibana-basic-auth

ğŸ§© STEP 5: Expose Nginx (Service)
ğŸ“„ nginx-service.yaml
apiVersion: v1
kind: Service
metadata:
  name: nginx-kibana
  namespace: logging
spec:
  type: NodePort
  selector:
    app: nginx-kibana
  ports:
  - port: 80
    targetPort: 80
    nodePort: 30080

ğŸ§© STEP 6: Apply Everything
kubectl apply -f nginx-config.yaml
kubectl apply -f nginx-deployment.yaml
kubectl apply -f nginx-service.yaml

ğŸ§© STEP 7: Access Kibana (Secured)
Open browser:
http://<NodeIP>:30080

âœ… Browser asks for username & password
âœ… After login â†’ Kibana opens



















































